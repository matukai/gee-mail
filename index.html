<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet">

    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        console.log(window.geemails);
/*        console.log(window.geemails[0].date);
        console.log(window.geemails[0].subject);
        console.log(window.geemails[0].body);*/
        for(var i = 0; i<window.geemails.length; i++){
        	/*console.log(window.geemails[i].date);
        	console.log(window.geemails[i].subject);
        	console.log(window.geemails[i].body);*/

            //create container
        	var container = document.createElement("div");
            //label container class name "container"
        	container.className = "container";
            //apppend container to body via DOM
        	document.body.appendChild(container);

            //create date div
        	var dateSent = document.createElement("div");
            //label classname "dateSent"
        	dateSent.className = "dateSent";
            //add text from variable window.geemails
        	dateSent.innerHTML = window.geemails[i].date;
            //append to container div
        	container.appendChild(dateSent);

        	
            //create subject child div
        	var subjectBody = document.createElement("div");
        	subjectBody.className = "subjectBody";
        	subjectBody.innerHTML = window.geemails[i].subject;
            //append to container div
        	container.appendChild(subjectBody);
             

            //create sender div
            var senderName = document.createElement("div");
            senderName.className = "senderName";
            senderName.innerHTML = window.geemails[i].sender;
            container.appendChild(senderName);


        	//create body child div
        	var mainBody = document.createElement("div");
        	mainBody.className = "mainBody";
        	mainBody.innerHTML = window.geemails[i].body;
            //append to container div
        	subjectBody.appendChild(mainBody);
        }

        //toggle event listener on click subject
        var bodyText = document.getElementsByClassName("subjectBody");
        for(var i = 0; i<bodyText.length; i++){
            bodyText[i].addEventListener("click",showBody);
        }
        
        function showBody(){
            var text = this.querySelectorAll(".mainBody")[0];
            if (text.style.display === "none"){
                text.style.display = "block";
            }else{
                text.style.display = "none";
            }
        }

        //display inbox count via .length property
        var count = document.createElement("div");
        count.id = "inboxCount";
        count.innerHTML = "Number of Messages: " + window.geemails.length;
        inboxCount.appendChild(count);


        function newMessage(){
            var freshMessage = getNewMessage();
            //getNewMessage is object

            var newDate = document.createElement("div");
            newDate.className = "dateSent";
            newDate.innerHTML = freshMessage.date;
            container.appendChild(newDate);

            var newSubjectBody = document.createElement("div");
            newSubjectBody.className = "subjectBody";
            newSubjectBody.innerHTML = freshMessage.subject;
            container.appendChild(newSubjectBody);

            var newName = document.createElement("div");
            newName.className = "senderName";
            newName.innerHTML = freshMessage.sender;
            container.appendChild(newName);

            var newBody = document.createElement("div");
            newBody.className = "mainBody";
            newBody.innerHTML = freshMessage.body;
            newSubjectBody.appendChild(newBody);

            var bodyText = document.getElementsByClassName("subjectBody");
        for(var i = 0; i<bodyText.length; i++){
            bodyText[i].addEventListener("click",showBody);
        }
        
        function showBody(){
            var text = this.querySelectorAll(".mainBody")[0];
            if (text.style.display === "none"){
                text.style.display = "block";
            }else{
                text.style.display = "none";
            }
        }
       
        count.innerHTML = "Number of Messages: " + window.geemails.length++;
        
        }
        setInterval(newMessage,2000);

        console.log(getNewMessage());

      };
    </script>
	</head>
	<body>


		<div class="container" id="main">
			<h1 id="heading">Google</h1>
			<h4>Welcome To Your Inbox</h4>
			<h3 id="inboxCount"></h3>
            <h3 id="messages">Messages:</h3>
        
            
		</div>


	</body>
</html>